#!/usr/bin/env modbuild

BOOST_BUILD_PATH="${BUILD_DIR}"

TOOLSET=''

pbuild::pre_configure() {
	case "${COMPILER}" in
	gcc )
	        TOOLSET=gcc
	        ;;
	clang )
		TOOLSET=clang
		;;
	* )
	        std::die 1 "Unsupported compiler!"
	        ;;
	esac

        cd "${SRC_DIR}"
        ./bootstrap.sh \
                --prefix="${PREFIX}" \
                --with-toolset=${TOOLSET} \
                --without-libraries=python \
                || exit 1
        ./b2  \
                --build-dir="${BUILD_DIR}" \
                --layout=system \
                --without-python \
		--without-mpi \
                toolset=${TOOLSET} \
                variant=release \
                link=shared,static \
                threading=multi \
                install -j 3 \
                || exit 1
}

pbuild::compile() {
	:
}
pbuild::install() {
	:
}
